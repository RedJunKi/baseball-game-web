<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>숫자 야구 게임</title>
    <style>

    </style>
</head>
<body>
<h1>숫자 야구 게임</h1>
<form id="login-form">
    <button type="button" id="login-button">로그인 하러가기</button>
</form>
<form>
    <img src="/images/baseball.jpg" alt="Ryu" style="width:20%">
</form>
<form id="game-form">
    <fieldset>
        <label for="guess">숫자를 입력하세요 (예: 123):</label>
        <input type="text" id="guess" name="guess" required pattern="\d{3}">
        <button type="submit">제출</button>
        <button type="button" id="reset-button">다시하기</button>
    </fieldset>
</form>
<div id="result"></div>

<script>
        document.getElementById('login-button').addEventListener('click', async function () {
        window.location.href = 'login.html'
            });

        document.getElementById('game-form').addEventListener('submit', async function (event) {
            event.preventDefault();
            const guess = document.getElementById('guess').value;

            const response = await fetch('/api/guess', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ guess })
            });

            const result = await response.json();
            document.getElementById('result').textContent = `스트라이크: ${result.strikes}, 볼: ${result.balls}`;

            if (result.strikes ===3) {
                const newGame = confirm('정답입니다! 새로운 게임을 시작하시겠습니까?');
                if (newGame) {
                    await fetch('/api/new-game', {
                        method: 'POST'
                    });
                    document.getElementById('result').textContent = '';
                    document.getElementById('guess').value = '';
                    alert('새로운 게임이 시작되었습니다!');
                }
            }
        });
    document.getElementById('reset-button').addEventListener('click', async function () {
        const response = await fetch('/api/new-game', {
            method: 'POST'
    });

    if (response.ok) {
        document.getElementById('result').textContent = '';
        document.getElementById('guess').value = '';
        alert('새로운 게임이 시작되었습니다!');
    } else {
        alert('새로운 게임을 시작하는 데 실패했습니다.');
    }
});
</script>
</body>
</html>
